% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[top=1.5cm,bottom=3cm,hmargin=2.5cm]{geometry}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother

\usepackage{fvextra}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
    commandchars=\\\{\},
    breaklines, breaknonspaceingroup, breakanywhere
}
\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother

\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Research Design Outline},
  pdfauthor={Matteo Mazzarelli},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Research Design Outline}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Detecting Bots on Reddit\\
Computational Social Science}
\author{Matteo Mazzarelli}
\date{January 9, 2025}

\begin{document}
\maketitle


\section{Research Question \&
Relevance}\label{research-question-relevance}

\textbf{Research Question:} Can basic heuristic methods effectively
identify bot influence on Reddit discussions?

\textbf{Hypotheses:}

\begin{itemize}
\tightlist
\item
  Account activity heuristics can identify probable bot accounts.
\item
  These accounts may amplify specific narratives or contribute to online
  polarization.
\end{itemize}

\textbf{Relevance:} This study is a preliminary investigation into using
simple methods for detecting and analyzing potential bot activity on
Reddit. The findings will inform the need for more sophisticated methods
to understand bots' broader impact on online discourse.

\section{Data \& Measurement}\label{sec-data}

\subsection{Data}\label{data}

\begin{itemize}
\tightlist
\item
  \textbf{Source:} Reddit API via the Python Reddit API Wrapper (PRAW).
\item
  \textbf{Subreddits:} Selected for high subscriber counts and relevance
  to bot-targeted topics (e.g., politics, news). Keywords for selection
  will be generated using a reproducible method with Google Gemini (see
  Section~\ref{sec-keywords} for prompt and code). Subreddits will be
  scored as detailed in Section~\ref{sec-subreddits}.
\item
  \textbf{Collection:} Posts, comments, timestamps, and available user
  data like account age and karma.
\end{itemize}

\subsection{Measurement}\label{measurement}

\begin{itemize}
\tightlist
\item
  \textbf{Bot Identification (Heuristics):} Accounts flagged as
  potential bots if they exhibit:

  \begin{itemize}
  \tightlist
  \item
    Young account age.
  \item
    Unusually low/high karma.
  \item
    High posting frequency.
  \item
    Repetitive content.
  \end{itemize}
\item
  \textbf{Analysis:}

  \begin{itemize}
  \tightlist
  \item
    \textbf{Descriptive:} Estimate bot prevalence, compare content from
    suspected bots versus humans, and analyze bot engagement patterns.
  \item
    \textbf{Inferential:} Explore correlations between bot activity and
    narrative amplification (via keyword analysis) or polarization (via
    sentiment analysis).
  \item
    \textbf{Accuracy Evaluation:} If feasible, build classification
    models and assess using cross-validation. Test various heuristic
    combinations, evaluating their performance with standard
    classification metrics.
  \end{itemize}
\end{itemize}

\section{Methodology: Challenges, Evaluation, and
Scope}\label{methodology-challenges-evaluation-and-scope}

\subsection{Population \& Sample}\label{population-sample}

\begin{itemize}
\tightlist
\item
  \textbf{Population:} Reddit users, especially in subreddits related to
  topics often targeted by bots.
\item
  \textbf{Sample:} Data from selected subreddits as outlined in
  Section~\ref{sec-data}.
\end{itemize}

\subsection{Challenges \& Limitations}\label{challenges-limitations}

Identifying Reddit bots is difficult because of user anonymity, as well
as limited API access for data collection, and the inherent inaccuracy
of heuristic detection methods. This study prioritizes a feasible
approach, rigorously evaluating the accuracy of heuristics while
transparently addressing all limitations. Ethical issues are also
considered: only publicly available data will be used, and usernames
will be anonymized to protect user privacy. The methodology, including
limitations of bot identification, will be documented transparently.

\subsection{Key Variable Measurement}\label{key-variable-measurement}

\begin{itemize}
\tightlist
\item
  \textbf{Bot Activity:} Identified using heuristics such as account
  age, karma, and posting behavior.
\item
  \textbf{Narrative Amplification:} Measured by frequency of keywords
  linked to specific narratives.
\item
  \textbf{Polarization:} Assessed using sentiment analysis on discussion
  content.
\end{itemize}

\subsection{Evaluation of Bot
Detection}\label{evaluation-of-bot-detection}

The effectiveness of the heuristics will be thoroughly evaluated,
including testing different combinations. We will explore leveraging
Large Language Models to refine detection. If feasible, simple
classification models will be developed and their performance assessed
using standard accuracy metrics, offering a quantitative evaluation of
the bot detection's effectiveness.

\subsection{Expected Outcomes}\label{expected-outcomes}

This research aims to establish the feasibility of using basic
heuristics for bot detection on Reddit and provide preliminary insights
into their potential influence on discussions, particularly regarding
narrative amplification and polarization. The primary limitations will
be the accuracy of the heuristics and the generalizability of the
results to all of Reddit.

\newpage

\appendix

\section{Appendix}\label{appendix}

\subsection{Keyword Generation}\label{sec-keywords}

The list of keywords can be generated with the help of a large language
model API (e.g.~Gemini) tuned for reproducibility (stochastic parameters
such as Temperature turned to 0) and includes:

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{import}\NormalTok{ google.generativeai }\ImportTok{as}\NormalTok{ genai}
\ImportTok{import}\NormalTok{ os}

\NormalTok{genai.configure(api\_key}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"GEMINI\_API\_KEY"}\NormalTok{])}

\CommentTok{\# Create the model}
\NormalTok{generation\_config }\OperatorTok{=}\NormalTok{ \{}
  \StringTok{"temperature"}\NormalTok{: }\DecValTok{0}\NormalTok{,}
  \CommentTok{\# controls randomness.}
  \CommentTok{\# 0 = most deterministic}
  \CommentTok{\# (always selects highest probability token).}
  \StringTok{"top\_p"}\NormalTok{: }\DecValTok{0}\NormalTok{,}
  \CommentTok{\# nucleus sampling:}
  \CommentTok{\# limits token selection to the most probable.}
  \CommentTok{\# 0 = most deterministic (used when temperature \textgreater{} 0).}
  \StringTok{"top\_k"}\NormalTok{: }\DecValTok{1}\NormalTok{,}
  \CommentTok{\# restricts to top \textquotesingle{}k\textquotesingle{} tokens.}
  \CommentTok{\# 1 = most deterministic (used when temperature \textgreater{} 0).}
  \StringTok{"max\_output\_tokens"}\NormalTok{: }\DecValTok{8192}\NormalTok{,}
  \StringTok{"response\_mime\_type"}\NormalTok{: }\StringTok{"text/plain"}\NormalTok{,}
\NormalTok{\}}

\NormalTok{model }\OperatorTok{=}\NormalTok{ genai.GenerativeModel(}
\NormalTok{  model\_name}\OperatorTok{=}\StringTok{"gemini{-}exp{-}1206"}\NormalTok{,}
  \CommentTok{\# best performing gemini model (see: https://livebench.ai)}
  \CommentTok{\# api usage is basically unlimited and free of charge}
\NormalTok{  generation\_config}\OperatorTok{=}\NormalTok{generation\_config,}
\NormalTok{)}

\ImportTok{import}\NormalTok{ praw}
\ImportTok{import}\NormalTok{ pandas }\ImportTok{as}\NormalTok{ pd}

\NormalTok{reddit }\OperatorTok{=}\NormalTok{ praw.Reddit(}
\NormalTok{    client\_id}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"PRAW\_CLIENT\_ID"}\NormalTok{],}
\NormalTok{    client\_secret}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"PRAW\_CLIENT\_SECRET"}\NormalTok{],}
\NormalTok{    user\_agent}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"PRAW\_USER\_AGENT"}\NormalTok{],}
\NormalTok{    username}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"PRAW\_USERNAME"}\NormalTok{],}
\NormalTok{    password}\OperatorTok{=}\NormalTok{os.environ[}\StringTok{"PRAW\_PASSWORD"}\NormalTok{],}
\NormalTok{)}

\CommentTok{\# Fetch a large subset of popular subreddits}
\CommentTok{\# (large limit makes this representative of}
\CommentTok{\# the largest overall subreddits by subscribers,}
\CommentTok{\# check: https://gummysearch.com/tools/top{-}subreddits/)}
\NormalTok{subreddits }\OperatorTok{=} \BuiltInTok{list}\NormalTok{(reddit.subreddits.popular(limit}\OperatorTok{=}\DecValTok{1000}\NormalTok{))}

\CommentTok{\# Create a DataFrame containing generated subs list}
\NormalTok{subs\_df }\OperatorTok{=}\NormalTok{ pd.DataFrame([\{}
    \StringTok{"Name"}\NormalTok{: subreddit.display\_name,}
    \StringTok{"Subscribers"}\NormalTok{: subreddit.subscribers,}
    \StringTok{"Description"}\NormalTok{: subreddit.public\_description,}
    \StringTok{"Over 18"}\NormalTok{: subreddit.over18,}
    \StringTok{"Submission Type"}\NormalTok{: subreddit.submission\_type}
\NormalTok{\} }\ControlFlowTok{for}\NormalTok{ subreddit }\KeywordTok{in}\NormalTok{ subreddits]).sort\_values(}
\NormalTok{    by}\OperatorTok{=}\StringTok{"Subscribers"}\NormalTok{, ascending}\OperatorTok{=}\VariableTok{False}\NormalTok{, ignore\_index}\OperatorTok{=}\VariableTok{True}\NormalTok{)}

\ImportTok{import}\NormalTok{ ast}

\NormalTok{chat\_session }\OperatorTok{=}\NormalTok{ model.start\_chat()}

\NormalTok{response }\OperatorTok{=}\NormalTok{ chat\_session.send\_message(}\StringTok{"What are some keywords I can use to create a list of subreddits which are likely to be influenced by bots because of their controversial nature? These are keywords that I would look for within a subreddit\textquotesingle{}s name or description. For example: }\CharTok{\textbackslash{}"}\StringTok{news}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{politics}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{discussion}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{war}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{vaccines}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{controversial}\CharTok{\textbackslash{}"}\StringTok{, }\CharTok{\textbackslash{}"}\StringTok{conflict}\CharTok{\textbackslash{}"}\StringTok{, etc.}\CharTok{\textbackslash{}n\textbackslash{}n}\StringTok{Keep the answer short, only including 50 keywords and saving them in a python list as follows [}\CharTok{\textbackslash{}"}\StringTok{key1}\CharTok{\textbackslash{}"}\StringTok{,}\CharTok{\textbackslash{}"}\StringTok{key2}\CharTok{\textbackslash{}"}\StringTok{,...]. Send the output as text not as code."}\NormalTok{)}

\NormalTok{bot\_influence\_keywords }\OperatorTok{=}\NormalTok{ ast.literal\_eval(response.candidates[}\DecValTok{0}\NormalTok{].content.parts[}\DecValTok{0}\NormalTok{].text.replace(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{, }\StringTok{""}\NormalTok{))}

\ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(}\DecValTok{0}\NormalTok{, }\BuiltInTok{len}\NormalTok{(bot\_influence\_keywords), }\DecValTok{5}\NormalTok{):}
    \BuiltInTok{print}\NormalTok{(}\OperatorTok{*}\NormalTok{bot\_influence\_keywords[i:i}\OperatorTok{+}\DecValTok{5}\NormalTok{])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
news politics discussion war vaccines
controversial conflict debate opinion world
current events election government policy social
media conspiracy activism protest rights
freedom censorship propaganda misinformation disinformation
fake news bias ideology partisan left
right conservative liberal progressive republican
democrat socialism capitalism communism fascism
anarchy global national security privacy
surveillance technology science health
\end{verbatim}

\subsection{Selected Subreddits}\label{sec-subreddits}

The top 10 subreddits based on this scoring system are:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Score subreddits based on subscribers and keywords in description}
\KeywordTok{def}\NormalTok{ calculate\_bot\_influence\_score(row):}
\NormalTok{    score }\OperatorTok{=} \DecValTok{0}
    
    \CommentTok{\# Large subscriber base increases potential for bot activity}
    \ControlFlowTok{if}\NormalTok{ row[}\StringTok{\textquotesingle{}Subscribers\textquotesingle{}}\NormalTok{] }\OperatorTok{\textgreater{}} \DecValTok{10000000}\NormalTok{:}
\NormalTok{        score }\OperatorTok{+=} \DecValTok{5}
    \ControlFlowTok{elif}\NormalTok{ row[}\StringTok{\textquotesingle{}Subscribers\textquotesingle{}}\NormalTok{] }\OperatorTok{\textgreater{}} \DecValTok{5000000}\NormalTok{:}
\NormalTok{        score }\OperatorTok{+=} \DecValTok{4}
    \ControlFlowTok{elif}\NormalTok{ row[}\StringTok{\textquotesingle{}Subscribers\textquotesingle{}}\NormalTok{] }\OperatorTok{\textgreater{}} \DecValTok{1000000}\NormalTok{:}
\NormalTok{        score }\OperatorTok{+=} \DecValTok{3}
        
    \CommentTok{\# Check for keywords in description and subreddit name}
\NormalTok{    description }\OperatorTok{=}\NormalTok{ row[}\StringTok{\textquotesingle{}Description\textquotesingle{}}\NormalTok{].lower()}
\NormalTok{    sub\_name }\OperatorTok{=}\NormalTok{ row[}\StringTok{\textquotesingle{}Name\textquotesingle{}}\NormalTok{].lower()}
    \ControlFlowTok{for}\NormalTok{ keyword }\KeywordTok{in}\NormalTok{ bot\_influence\_keywords:}
        \ControlFlowTok{if}\NormalTok{ keyword }\KeywordTok{in}\NormalTok{ description:}
\NormalTok{            score }\OperatorTok{+=} \DecValTok{1}
        \ControlFlowTok{if}\NormalTok{ keyword }\KeywordTok{in}\NormalTok{ sub\_name:}
\NormalTok{            score }\OperatorTok{+=} \DecValTok{1}
            
    \ControlFlowTok{return}\NormalTok{ score}

\NormalTok{subs\_df[}\StringTok{\textquotesingle{}Bot Score\textquotesingle{}}\NormalTok{] }\OperatorTok{=}\NormalTok{ subs\_df.}\BuiltInTok{apply}\NormalTok{(calculate\_bot\_influence\_score, axis}\OperatorTok{=}\DecValTok{1}\NormalTok{)}

\CommentTok{\# Get top 10 most vulnerable subreddits}
\NormalTok{top\_vulnerable }\OperatorTok{=}\NormalTok{ subs\_df.nlargest(}\DecValTok{10}\NormalTok{, }\StringTok{\textquotesingle{}Bot Score\textquotesingle{}}\NormalTok{)[[}\StringTok{\textquotesingle{}Name\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Subscribers\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Submission Type\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Bot Score\textquotesingle{}}\NormalTok{]].reset\_index(drop}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
\NormalTok{top\_vulnerable}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lllll@{}}
\toprule\noalign{}
& Name & Subscribers & Submission Type & Bot Score \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & worldnews & 43568694 & link & 9 \\
1 & news & 29225132 & link & 9 \\
2 & technology & 17726871 & any & 9 \\
3 & science & 33423695 & link & 8 \\
4 & AmItheAsshole & 23088618 & self & 8 \\
5 & politics & 8694945 & link & 8 \\
6 & movies & 34170875 & any & 7 \\
7 & askscience & 25977459 & self & 7 \\
8 & sports & 21709169 & link & 7 \\
9 & UpliftingNews & 20190302 & link & 7 \\
\end{longtable}




\end{document}
